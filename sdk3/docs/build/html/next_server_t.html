
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>next_server_t &#8212; Network Next SDK 3.4.5 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="next_address_t" href="next_address_t.html" />
    <link rel="prev" title="next_client_t" href="next_client_t.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="next-server-t">
<h1>next_server_t<a class="headerlink" href="#next-server-t" title="Permalink to this headline">¶</a></h1>
<p>The server side of a client/server connection.</p>
<p>To use a server, create it and it automatically starts accepting sessions from clients.</p>
<p>To upgrade a session for monitoring and <em>potential</em> acceleration, call <em>next_server_upgrade_session</em> on a client’s address.</p>
<p>Packets received from clients are passed to you via a callback function, including the address of the client that sent the packet.</p>
<p>Make sure to pump the server update once per frame.</p>
<p><strong>Examples:</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="simple_server_example.html"><span class="doc">Simple Server Example</span></a></p></li>
<li><p><a class="reference internal" href="upgraded_server_example.html"><span class="doc">Upgraded Server Example</span></a></p></li>
<li><p><a class="reference internal" href="complex_server_example.html"><span class="doc">Complex Server Example</span></a></p></li>
</ul>
<div class="section" id="next-server-create">
<h2>next_server_create<a class="headerlink" href="#next-server-create" title="Permalink to this headline">¶</a></h2>
<p>Creates an instance of a server, binding a socket to the specified address and port.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">next_server_t</span> <span class="o">*</span> <span class="nf">next_server_create</span><span class="p">(</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">context</span><span class="p">,</span>
                                    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">server_address</span><span class="p">,</span>
                                    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">bind_address</span><span class="p">,</span>
                                    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">datacenter</span><span class="p">,</span>
                                    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">packet_received_callback</span><span class="p">)(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">context</span><span class="p">,</span> <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">from</span><span class="p">,</span> <span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">packet_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">packet_bytes</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>context</strong> – An optional pointer to context passed to any callbacks made from the server.</p></li>
<li><p><strong>server_address</strong> – The public IP address and port that clients will connect to.</p></li>
<li><p><strong>bind_address</strong> – The address and port to bind to. Typically “0.0.0.0:[portnum]” is passed in, binding the server socket to any IPv4 interface on a specific port, for example: “0.0.0.0:50000”.</p></li>
<li><p><strong>datacenter</strong> – The name of the datacenter that the game server is running in. Please pass in “local” until we work with you to determine the set of datacenters you host servers in.</p></li>
<li><p><strong>packet_received_callback</strong> – Called from the same thread that calls <em>next_server_update</em>, whenever a packet is received from a client. Required.</p></li>
<li><p><strong>wake_up_callback</strong> – Optional callback. Pass NULL if not used. Sets a callback function to be called from an internal network next thread when a packet is ready to be received for this server. Intended to let you set an event of your own creation when a packet is ready to receive, making it possible to use Network Next with applications built around traditional select or wait for multiple event style blocking socket loops. Call next_server_update to pump received packets to the packet_received_callback when you wake up on main thread from your event.</p></li>
</ul>
</div></blockquote>
<p><strong>Return value:</strong></p>
<blockquote>
<div><p>The newly created server instance, or NULL, if the server could not be created.</p>
<p>Typically, NULL is only returned when another socket is already bound on the same port, or if an invalid server or bind address is passed in.</p>
</div></blockquote>
<p><strong>Example:</strong></p>
<p>First define a callback for received packets:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">server_packet_received</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">_context</span><span class="p">,</span> <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">from</span><span class="p">,</span> <span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">packet_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">packet_bytes</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">address_buffer</span><span class="p">[</span><span class="n">NEXT_MAX_ADDRESS_STRING_LENGTH</span><span class="p">];</span>
    <span class="n">next_printf</span><span class="p">(</span> <span class="n">NEXT_LOG_LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;server received packet from client %s (%d bytes)&quot;</span><span class="p">,</span> <span class="n">next_address_to_string</span><span class="p">(</span> <span class="n">from</span><span class="p">,</span> <span class="n">address_buffer</span> <span class="p">),</span> <span class="n">packet_bytes</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, create a server:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span> <span class="o">=</span> <span class="n">next_server_create</span><span class="p">(</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;0.0.0.0:0&quot;</span><span class="p">,</span> <span class="n">server_packet_received</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span> <span class="n">server</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">&quot;error: failed to create server</span><span class="se">\n</span><span class="s">&quot;</span> <span class="p">);</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-destroy">
<h2>next_server_destroy<a class="headerlink" href="#next-server-destroy" title="Permalink to this headline">¶</a></h2>
<p>Destroys a server instance, and the socket it manages internally.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">next_server_destroy</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span> <span class="p">);</span>
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>server</strong> – The server instance to destroy. Must be a valid server instance created by <em>next_server_create</em>. Do not pass in NULL.</p></li>
</ul>
</div></blockquote>
<p><strong>Example:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">next_server_destroy</span><span class="p">(</span> <span class="n">server</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-port">
<h2>next_server_port<a class="headerlink" href="#next-server-port" title="Permalink to this headline">¶</a></h2>
<p>Gets the port the server socket is bound to.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint16_t</span> <span class="nf">next_server_port</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span> <span class="p">);</span>
</pre></div>
</div>
<p><strong>Return value:</strong></p>
<blockquote>
<div><p>The port number the server socket is bound to.</p>
</div></blockquote>
<p><strong>Example:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span> <span class="o">=</span> <span class="n">next_server_create</span><span class="p">(</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="s">&quot;0.0.0.0:50000&quot;</span><span class="p">,</span> <span class="s">&quot;local&quot;</span><span class="p">,</span> <span class="n">server_packet_received</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span> <span class="n">server</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">&quot;error: failed to create server</span><span class="se">\n</span><span class="s">&quot;</span> <span class="p">);</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span> <span class="kt">uint16_t</span> <span class="n">server_port</span> <span class="o">=</span> <span class="n">next_server_port</span><span class="p">(</span> <span class="n">client</span> <span class="p">);</span>

<span class="n">printf</span><span class="p">(</span> <span class="s">&quot;the client is bound to port %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">server_port</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-state">
<h2>next_server_state<a class="headerlink" href="#next-server-state" title="Permalink to this headline">¶</a></h2>
<p>Gets the state the server is in.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">next_server_state</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span> <span class="p">);</span>
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>server</strong> – The server instance.</p></li>
</ul>
</div></blockquote>
<p><strong>Return value:</strong></p>
<blockquote>
<div><p>The server state, which is one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>NEXT_SERVER_STATE_DIRECT_ONLY</p></li>
<li><p>NEXT_SERVER_STATE_RESOLVING_HOSTNAME</p></li>
<li><p>NEXT_SERVER_STATE_INITIALIZING</p></li>
<li><p>NEXT_SERVER_STATE_INITIALIZED</p></li>
</ul>
</div></blockquote>
<p>The server is initially in the direct only state.</p>
<p>If a valid customer private key is setup, the server will first try to resolve the backend hostname, which is “prod.networknext.com” by default.</p>
<p>Once the backend hostname is resolved, the server initializes with the backend. When everything works, the server lands in the initialized state and is ready to accelerate players.</p>
<p>If anything fails, the server falls back to the direct only state, and only serves up direct routes over the public internet.</p>
</div></blockquote>
<p><strong>Example:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">state</span> <span class="o">=</span> <span class="s">&quot;???&quot;</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">server_state</span> <span class="o">=</span> <span class="n">next_server_state</span><span class="p">(</span> <span class="n">server</span> <span class="p">);</span>

<span class="k">switch</span> <span class="p">(</span> <span class="n">server_state</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">case</span> <span class="nl">NEXT_SERVER_STATE_DIRECT_ONLY</span><span class="p">:</span>
        <span class="n">state</span> <span class="o">=</span> <span class="s">&quot;direct only&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="nl">NEXT_SERVER_STATE_RESOLVING_HOSTNAME</span><span class="p">:</span>
        <span class="n">state</span> <span class="o">=</span> <span class="s">&quot;resolving hostname&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="nl">NEXT_SERVER_STATE_INITIALIZING</span><span class="p">:</span>
        <span class="n">state</span> <span class="o">=</span> <span class="s">&quot;initializing&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="nl">NEXT_SERVER_STATE_INITIALIZED</span><span class="p">:</span>
        <span class="n">state</span> <span class="o">=</span> <span class="s">&quot;initialized&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
        <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">printf</span><span class="p">(</span> <span class="s">&quot;server state = %s (%d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">server_state</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-upgrade-session">
<h2>next_server_upgrade_session<a class="headerlink" href="#next-server-upgrade-session" title="Permalink to this headline">¶</a></h2>
<p>Upgrades a session for monitoring and <em>potential</em> acceleration by Network Next.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint64_t</span> <span class="nf">next_server_upgrade_session</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span>
                                      <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">address</span><span class="p">,</span>
                                      <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">user_id</span> <span class="p">);</span>
</pre></div>
</div>
<p>IMPORTANT: Make sure you only call this function when you are 100% sure this is a real player in your game.</p>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>server</strong> – The server instance.</p></li>
<li><p><strong>address</strong> – The address of the client to be upgraded.</p></li>
<li><p><strong>user_id</strong> – The user id for the session. Pass in any unique per-user identifier you have.</p></li>
</ul>
</div></blockquote>
<p><strong>Return value:</strong></p>
<blockquote>
<div><p>The session id assigned the session that was upgraded.</p>
</div></blockquote>
<p><strong>Example:</strong></p>
<p>The address struct is defined as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">next_address_t</span>
<span class="p">{</span>
    <span class="k">union</span> <span class="p">{</span> <span class="kt">uint8_t</span> <span class="n">ipv4</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="kt">uint16_t</span> <span class="n">ipv6</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span> <span class="p">}</span> <span class="n">data</span><span class="p">;</span>
    <span class="kt">uint16_t</span> <span class="n">port</span><span class="p">;</span>
    <span class="kt">uint8_t</span> <span class="n">type</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>You can parse an address from a string like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">next_address_t</span> <span class="n">address</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span> <span class="n">next_address_parse</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">address</span><span class="p">,</span> <span class="s">&quot;127.0.0.1:50000&quot;</span> <span class="p">)</span> <span class="o">!=</span> <span class="n">NEXT_OK</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">&quot;error: failed to parse address</span><span class="se">\n</span><span class="s">&quot;</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The address struct is passed in when you receive packet from a client:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">server_packet_received</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">context</span><span class="p">,</span> <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">from</span><span class="p">,</span> <span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">packet_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">packet_bytes</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">address_buffer</span><span class="p">[</span><span class="n">NEXT_MAX_ADDRESS_STRING_LENGTH</span><span class="p">];</span>
    <span class="n">next_printf</span><span class="p">(</span> <span class="n">NEXT_LOG_LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;server received packet from client %s (%d bytes)&quot;</span><span class="p">,</span> <span class="n">next_address_to_string</span><span class="p">(</span> <span class="n">from</span><span class="p">,</span> <span class="n">address_buffer</span> <span class="p">),</span> <span class="n">packet_bytes</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once you have the address, upgrading a session is easy:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">next_server_upgrade_session</span><span class="p">(</span> <span class="n">server</span><span class="p">,</span> <span class="n">client_address</span><span class="p">,</span> <span class="n">user_id</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-tag-session">
<h2>next_server_tag_session<a class="headerlink" href="#next-server-tag-session" title="Permalink to this headline">¶</a></h2>
<p>Tags a session for potentially different network optimization parameters.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">next_server_tag_session</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span> <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">address</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">tag</span> <span class="p">);</span>
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>server</strong> – The server instance.</p></li>
<li><p><strong>address</strong> – The address of the client to tag.</p></li>
<li><p><strong>tag</strong> – The tag to be applied to the client. Some ideas: “pro”, “streamer” or “dev”.</p></li>
</ul>
</div></blockquote>
<p><strong>Example:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">next_server_tag_session</span><span class="p">(</span> <span class="n">server</span><span class="p">,</span> <span class="n">client_address</span><span class="p">,</span> <span class="s">&quot;pro&quot;</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-session-upgraded">
<h2>next_server_session_upgraded<a class="headerlink" href="#next-server-session-upgraded" title="Permalink to this headline">¶</a></h2>
<p>Checks if a session has been upgraded.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="nf">next_server_session_upgraded</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span> <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">address</span> <span class="p">);</span>
</pre></div>
</div>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>server</strong> – The server instance.</p></li>
<li><p><strong>address</strong> – The address of the client to check.</p></li>
</ul>
</div></blockquote>
<p><strong>Return value:</strong></p>
<blockquote>
<div><p>True if the session has been upgraded, false otherwise.</p>
</div></blockquote>
<p><strong>Example:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">const</span> <span class="kt">bool</span> <span class="n">upgraded</span> <span class="o">=</span> <span class="n">next_server_session_upgraded</span><span class="p">(</span> <span class="n">server</span><span class="p">,</span> <span class="n">client_address</span> <span class="p">);</span>

<span class="n">printf</span><span class="p">(</span> <span class="s">&quot;session upgraded = %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">upgraded</span> <span class="o">?</span> <span class="s">&quot;true&quot;</span> <span class="o">:</span> <span class="s">&quot;false&quot;</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-send-packet">
<h2>next_server_send_packet<a class="headerlink" href="#next-server-send-packet" title="Permalink to this headline">¶</a></h2>
<p>Send a packet to a client.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">next_server_send_packet</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span> <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">to_address</span><span class="p">,</span> <span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">packet_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">packet_bytes</span> <span class="p">);</span>
</pre></div>
</div>
<p>Sends a packet to a client. If the client is upgraded and accelerated by network next, the packet will be sent across our private network of networks.</p>
<p>Otherwise, the packet will be sent across the public internet.</p>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>server</strong> – The server instance.</p></li>
<li><p><strong>to_address</strong> – The address of the client to send the packet to.</p></li>
<li><p><strong>packet_data</strong> – The packet data to send.</p></li>
<li><p><strong>packet_bytes</strong> – The size of the packet. Must be in the range 1 to NEXT_MTU (1300).</p></li>
</ul>
</div></blockquote>
<p><strong>Example:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span> <span class="n">packet_data</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="n">memset</span><span class="p">(</span> <span class="n">packet_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">packet_data</span><span class="p">)</span> <span class="p">);</span>
<span class="n">next_server_send_packet</span><span class="p">(</span> <span class="n">server</span><span class="p">,</span> <span class="n">client_address</span><span class="p">,</span> <span class="n">packet_data</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">packet_data</span><span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="next-server-send-packet-direct">
<h2>next_server_send_packet_direct<a class="headerlink" href="#next-server-send-packet-direct" title="Permalink to this headline">¶</a></h2>
<p>Send a packet to a client, forcing the packet to be sent over the public internet.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">next_server_send_packet_direct</span><span class="p">(</span> <span class="n">next_server_t</span> <span class="o">*</span> <span class="n">server</span><span class="p">,</span> <span class="k">const</span> <span class="n">next_address_t</span> <span class="o">*</span> <span class="n">to_address</span><span class="p">,</span> <span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">packet_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">packet_bytes</span> <span class="p">);</span>
</pre></div>
</div>
<p>This function is useful when you need to send non-latency sensitive packets to the client, for example, during a load screen.</p>
<p>Packets sent via this function do not apply to your network next bandwidth envelope.</p>
<p><strong>Parameters:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>server</strong> – The server instance.</p></li>
<li><p><strong>to_address</strong> – The address of the client to send the packet to.</p></li>
<li><p><strong>packet_data</strong> – The packet data to send.</p></li>
<li><p><strong>packet_bytes</strong> – The size of the packet. Must be in the range 1 to NEXT_MTU (1300).</p></li>
</ul>
</div></blockquote>
<p><strong>Example:</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span> <span class="n">packet_data</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="n">memset</span><span class="p">(</span> <span class="n">packet_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">packet_data</span><span class="p">)</span> <span class="p">);</span>
<span class="n">next_server_send_packet_direct</span><span class="p">(</span> <span class="n">server</span><span class="p">,</span> <span class="n">client_address</span><span class="p">,</span> <span class="n">packet_data</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">packet_data</span><span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Network Next SDK</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="how_it_works.html">How it works</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_the_sdk.html">Building the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple_client_example.html">Simple Client Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple_server_example.html">Simple Server Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgraded_client_example.html">Upgraded Client Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgraded_server_example.html">Upgraded Server Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex_client_example.html">Complex Client Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex_server_example.html">Complex Server Example</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="reference.html">Reference</a><ul>
      <li>Previous: <a href="next_client_t.html" title="previous chapter">next_client_t</a></li>
      <li>Next: <a href="next_address_t.html" title="next chapter">next_address_t</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Network Next, Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/next_server_t.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>